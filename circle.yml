machine:
  environment:
    CI_BUILD_NUMBER: "${CIRCLE_BUILD_NUM}"

dependencies:
  override:
    - ./gradlew resolveDependencies --console=plain

test:
  override:
    - ./gradlew build --console=plain
  post:
    - mkdir -p $CIRCLE_TEST_REPORTS/junit/
    - cp -a ./build/test-results/* $CIRCLE_TEST_REPORTS/junit/

deployment:
  prod:
    branch: master
    commands:
      - ./gradlew  publish -x check --console=plain
